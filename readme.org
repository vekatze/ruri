* Ruri Line for Emacs

#+begin_quote
瑠璃の地と人も見つべしわが床は涙の玉と敷きに敷ければ
#+end_quote

Ruri is a thin-layer over modeline.

[[/screenshots/low.png?raw=true]]

[[/screenshots/high.png?raw=true]]

** Installation
TBD

Then configure the mode-line like this:

#+begin_src emacs-lisp
(ruri-install
 '(modified size summary major-mode flycheck lsp encoding))
#+end_src

** Defining Your Own Segments
New segments can be defined using ~(define-ruri-segment NAME BODY)~. The ~NAME~ here is the name of the newly-defined segment, and the ~BODY~ is the body of a function that returns a (possibly propetrized) string; When this segment is used, the function ~(lambda () ,@BODY)~ is executed every time when a mode-line is updated.

Defined segments can be added to the modeline using ~ruri-install~.

Let's see a toy example. The following code defines a new segment ~my-great-segment~ and uses it:

#+begin_src emacs-lisp
;; shows current time using the face "error"
(define-ruri-segment my-great-segment
  (propertize (current-time-string) 'face 'error))

(ruri-install
 '(modified size summary major-mode encoding my-great-segment))
#+end_src

The code results in something like this:

[[/screenshots/example.png?raw=true]]

You can see that the resulting string of ~my-great-segment~ is concatenated to the resulting strings of the other segments. Those strings are concatenated using 2 spaces in our running example; This can be customized via ~ruri-separator~.

You can also see that the time in the modeline is updated everytime when the mode-line is updated.

** See Also
- [[https://github.com/vekatze/tsuki-theme.el][vekatze/tsuki-theme.el]]
  - the theme in the screenshots
